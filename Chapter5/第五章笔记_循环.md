# 第五章 循环和关系表达式 -- for 循环
## 5.1.1 for循环的组成:
1. 设置初始值
2. 执行测试,看看循环是否硬蛋继续进行
3. 执行循环操作
4. 更新用于(第2步)测试的值

for循环的书写格式:
```cpp
for (initialization; test-expression; update-expression)
{
    body;
}

/* 执行顺序:
    1. 执行initialization 部分
    2. 执行 test-expression
    3. 执行 body 部分
    4. 执行 update-expression 

    重复 2-4, 直到不满足 test-expression, 自动结束循环
*/
```
- 花括号`{}`内包含的语句称为循环体, 
  - 花括号内的语句不管是否进行了缩进, 它都是循环体中的一部分 (C++不按照缩进来识别, python是按照缩进来识别循环体的)
  - 如果循环体中`只有一条语句`, 则可以省略花括号.
  - for后面的几个表达式都要使用分号`;`来隔开

简单的for循环例子:
```cpp

#include <iostream>

int main(void)
{
    using namespace std;

    int i;
    for( i = 0; i<5; i++)
    {
        cout << "C++ knows loop" << endl;
    }

    cout << "C++ knows when to stop." << endl;
    return 0;
}
```

在C++中, `test-expression 可以是任意表达式`, 但是C++会把表达式的计算结果自动转为 `bool类型`

例如:
```cpp
#include <iostream>

int main(void)
{
    using namespace std;

    cout << "Enter the starting countdown value: ";
    int limit ;
    cin >> limit;

    int i;
    for(i=limit; i; i--)
        cout << "i = " << i << endl;

    cout << "Done, now that i = " << i << endl;  // 最后打印一下 i, i此时肯定是0, 因为0对应的 bool类型是 false

    return 0;
}
```
for循环执行顺序图解:
![](images/for循环执行顺序图解.png)

## 5.1.2 表达式和语句
在C++中, `任何值`或`任何有效的值和运算符的组合`都是表达式.
- 对于`赋值表达式`, 整个表达式的值等于 `赋值运算符右侧的值`
  - 如: `i=10;`, 这个表达式的`值就是20`.

代码例子:
```cpp
#include <iostream>

int main(void)
{
    using namespace std;

    int x;
    cout << "The expression x =100 has the value ";
    
    // cout << x = 100 << endl;  // 报错, 编译的时候, 编译器会因为运算符优先级问题而无法识别 "x左右两侧的运算符" 的含义
    //                             // 由于 "<<" 的优先级比"=" 高, 
    //                             // 因此编译器优先执行 "cout << x", 把x直接输出.
    //                             // 然后编译器开始解读 " = 100 << endl;", 解析不了, 就报错了
    
    cout << (x = 100) << endl;   // value 打印出来是100

    cout << "now x = " << x << endl;

    cout << (x < 3) << endl;   // value 打印出来是0, 表示 false
    
    cout << (x > 3) << endl;   // value 打印出来是1, 表示 true

    cout.setf(ios_base::boolalpha);     // 把 true false原样显示, 而不是打印数字
    cout << (x < 3) << endl;   // value 打印出来是 false
    cout << (x > 3) << endl;   // value 打印出来是 true

    return 0;
}
```


所有的`表达式`只要后面接上分号`;`, 它就是一条`语句`, 但不一定有编程意义, 例如:
- "`i`" 是一个`表达式`
- "`i;`" 是一条`语句`, 但是它没有编程意义  


### for循环的另一种写法 (把变量 i 的声明直接写在 for 循环表达式里)
此时, 变量 i `只在for循环体中有效`, 执行完for循环之后, 后面的语句是没办法访问这个变量i的.
```cpp
#include <iostream>

int main(void)
{
    using namespace std;

    // int i;     // 如果在这里声明 i, 则执行完for语句之后, i 仍然可用
    for( int i = 0; i<5; i++)
    {
        cout << "C++ knows loop" << endl;
    }

    // cout << "i = " << i << endl;   // 编译不通过, 此时的 i 已经不可见了, 执行完for之后i就被回收

    cout << "C++ knows when to stop." << endl;
    
    return 0;
}
```

### for循环使用示例
计算并打印 0~15 的阶乘:
```cpp
#include <iostream>

const int ArrSize = 16;

int main(void){
    long long factorials[ArrSize];

    factorials[0] = factorials[1] = 1LL;  // long long 类型

    for (int i=2; i<ArrSize; i++){
        factorials[i] = i * factorials[i-1];
    }

    for (int i =0; i < ArrSize; i ++)
        std::cout << i << "! = " << factorials[i] << std::endl;
    return 0;
}
```

指定for循环的步长:
```cpp
#include <iostream>

int main(void){
    using std::cout;
    using std::endl;
    using std::cin;

    cout << "Enter an integer: ";
    int by;
    cin >> by;

    cout << "Counting by " << by << "\n";

    for (int i = 0; i < 100; i = i + by){
        cout << i << endl;
    }
}
```

使用for循环访问字符串 (反向输出字符串):
- string 类里面有一个 size() 方法, 可以返回字符串的长度.
```cpp
#include <iostream>
#include <string>

int main(void){
    using namespace std;

    cout << "Enter an word: ";

    string word;
    cin >> word;

    for(int i = word.size() -1; i>=0 ;i--){
        cout << word[i] ;
    }
    cout << endl;

    return 0;
}
```


