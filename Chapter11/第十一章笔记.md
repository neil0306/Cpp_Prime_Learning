# 11.1 运算符重载
常见的就是 * 号, 它既可以表示乘法, 也可以表示"地址中的内容".
- 编译器通过`操作数的个数`, `操作数的类型`来区分运算符使用哪一种实现.


语法格式:
```cpp
    operatorOP(形参表) {        // 注意是 "operator" + "OP", OP为具体需要重载的运算符
        // 函数体
    }

    // 比如 operator*(参数列表)  // 这里是重载了 * 号
```
- OP必须是**C++已有的运算符**, 不能自定义.

代码例子:
- 头文件`mytimer1.h`
```cpp
#ifndef __MYTIMER0_H__
#define __MYTIMER0_H__

#include <iostream>

using namespace std;

class Time
{
    private:
        int hours;
        int minute;

    public:
        Time();
        Time(int h, int m = 0);
        void AddMin(int m);
        void AddHr(int h);
        void Reset(int h = 0, int m = 0);

        // Time Sum(const Time &t) const;   // 替换为运算符重载
        Time operator+(const Time &t) const;

        void show() const;
};

#endif
```

- 源文件`mytimer1.cpp`
```cpp
#include "mytimer1.h"

Time::Time()
{
    hours = minute = 0;
}

Time::Time(int h, int m)
{
    hours = h;
    minute = m;
}

void Time::AddMin(int m)
{
    minute += m;                // step1: 更新分钟数
    hours += minute / 60;       // step2: 进位
    minute %= 60;               // step3: 进位后刷新分钟数.
}

void Time::AddHr(int h)
{
    hours += h;
}

void Time::Reset(int h, int m)
{
    hours = h;
    minute = m;
}

// Time Time::Sum(const Time &t) const
// {
//     Time sum;
//     sum.minute = minute + t.minute;
//     sum.hours = hours + t.hours;

//     // 考虑进位
//     sum.hours += sum.minute / 60;
//     sum.minute %= 60;
//     return sum;
// }

Time Time::operator+(const Time &t) const
{
    Time sum;
    sum.minute = minute + t.minute;
    sum.hours = hours + t.hours;

    // 考虑进位
    sum.hours += sum.minute / 60;
    sum.minute %= 60;
    return sum;
}

void Time::show() const
{
    cout << "Hours = " << hours << ", Minutes = " << minute << endl;
}
```

- 源文件`useTimer1.cpp`
```cpp
#include <iostream>
#include "mytimer1.h"
using namespace std;

int main(void)
{
    Time coding(2, 40);
    Time fixing(5, 55);
    Time total;

    cout << "coding time:\n";
    coding.show();

    cout << "fixing time:\n";
    fixing.show();

    // total = coding.Sum(fixing);
    total = coding + fixing;        // 使用运算符重载
    cout << "Total time:\n";
    total.show();

    // 运算符重载的使用方式也可以写为下面的语句(当做成员函数来使用)
    Time Planning = coding.operator+(fixing);
    cout << "Planning time:\n";
    Planning.show();

    return 0;
}
```




